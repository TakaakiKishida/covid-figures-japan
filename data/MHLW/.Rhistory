expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2028),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2023, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2023.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2022.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016.8, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
setwd("~/Documents/GitHub/japan-pop-by-age/")
ggsave(popfig1, filename = "popfig1.png",
width = 10, height = 6)
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2028),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016.8, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2020),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016.8, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2029),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016.8, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2030),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016.8, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2030),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016.4, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2030),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016.8, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016.8, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
popfig1 <- ggplot() +
geom_area(data = popage,
aes(x = year, y = population / 1000,
fill = forcats::fct_rev(category)),
color = "white",
alpha = 0.7) +
h_dash_lines_1 + h_dash_lines_2 + h_dash_lines_3 +
h_dash_lines_4 + h_dash_lines_5 +
labs(title = "Age Distribution of Population in Japan, 1960-2019",
# subtitle = "",
caption = "Source: World Bank Open Data",
x = "Year",
y = "Population in Thousand") +
scale_fill_manual(values = c("#8ba6b5", "#2695ab", "#135280"))+
scale_y_continuous(limits = c(0, 130000),
expand = c(0, 0),
labels = scales::comma,
breaks = seq(0, 125000, 25000)) +
scale_x_continuous(limits = c(1960, 2030),
expand = c(0, 0),
breaks = year_range) +
theme_minimal() + theme(panel.grid=element_blank()) +
theme(text = element_text(family = "Optima"),
plot.title = element_text(size = 24),
plot.caption = element_text(hjust = 0, size = 14),
axis.text = element_text(color = "black", size = 14),
axis.title.y = element_text(size = 18),
axis.title.x = element_blank(),
plot.background = element_rect(fill = "#f5f5f2"),
legend.position = "none") +
# additional texts -- legend
annotate(geom = "text", label= "0-14 years",
x = 2024, y = 8000,
color = "#135280", family = "Optima", size = 6) +
annotate(geom = "text", label= "15-64 years",
x = 2024.3, y = 55000,
color = "#2695ab", family = "Optima", size = 6) +
annotate(geom = "text", label= "65+ years",
x = 2023.8, y = 110000,
color = "#8ba6b5", family = "Optima", size = 6) +
# additional lines -- arrow both
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 0, yend = 15775,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 16600, yend = 92008,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
annotate(geom = "segment", x = 2016.8, xend = 2016.8,
y = 92508, yend = 126383,
arrow = grid::arrow(length = unit(0.2, "cm"),
ends = "both"), color = "DimGray") +
# additional texts -- numbers
annotate(geom = "text", label= "15,875",
x = 2016, y = 12000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "75,033",
x = 2016, y = 88000,
color = "white", family = "Optima", size = 5) +
annotate(geom = "text", label= "35,357",
x = 2016, y = 121500,
color = "white", family = "Optima", size = 5)
popfig1
ggsave(popfig1, filename = "popfig1.png",
width = 10, height = 6)
(100*6) + (100*24) + (89*16) + (89*12) + (79*4)
6 + 24 + 16 + 12 + 4
((100*6) + (100*24) + (89*16) + (89*12) + (79*4))/62
install.packages(c("rcartocolor", "rworldmap"))
1
setwd("~/Documents/GitHub/covid-figures-japan/data/")
library(pacman)
pacman::p_load(tidyverse, ggrepel, ggthemes)
setwd("~/Documents/GitHub/covid-figures-japan/data/MHLW")
positive <- read_csv("pcr_positive_daily.csv")
View(positive)
